// Copyright 2012-2013 UIEvolution Inc. All Rights Reserved.
(function(){var p=[].slice,q=window,a=function(){var d,f,b,n,j;j="addToPlaylist getPlaylist getStatus getVersion getMetadata play pause skip stop resetPlaylist seek batch".split(" ");var h=this;f=function(d){return h[d]=function(){var e,b,f,c,g;e=1<=arguments.length?p.call(arguments,0):[];b=e[0];b instanceof Function&&(a.__hooks[d]=b);c=[h._host&&h._port?"":d+"|",d].join("");switch(d){case "addToPlaylist":f=0;var k,j,l,m;l=e[1];m=[];k=0;for(j=l.length;k<j;k++)e=l[k],m.push('|providerid="0",id="'+
++f+'",url="'+encodeURIComponent(e)+'"');c+=m.join("");break;case "getPlaylist":break;case "getStatus":break;case "getVersion":break;case "getMetadata":break;case "play":2<=e.length&&(c+='|pos="'+e[1]+'"');break;case "pause":break;case "skip":break;case "stop":break;case "resetPlaylist":break;case "seek":c+='|pos="'+e[1]+'",waitBuffering="'+e[2]+'"';break;case "batch":c+="&"+e[1].join("&");break;default:return}if(h.isArray(b))b.push(c);else return h._host&&h._port?(g=new XMLHttpRequest,g.open("POST",
["http://",h._host,":",h._port,"/audiolibrary/?"+ +new Date].join(""),!0),g.onreadystatechange=function(){var a;if(4===g.readyState)return b instanceof Function&&(200===g.status?b(g.responseText):(a="<return><cmd><cmdname>"+d+"</cmdname><retcode>-1</retcode></cmd></return>",b(a))),g.abort(),g.onreadystatechange=function(){return{}}},g.send(c)):document.location=["UJMLAPP:AS(",c,")"].join("")}};b=0;for(n=j.length;b<n;b++)d=j[b],f(d)};a.version="2.0.0";a.EV_STATUS=1;a.EV_METADATA=2;a.EV_ERROR=4;a.__instance=
null;a.__hooks={};a.deferred_return=function(d,f){var b;if(null!=a.getInstance()&&(b=a.__hooks[d],null!=b))return b(f)};a.getInstance=function(){null==a.__instance&&(a.__instance=new a);return a.__instance};a.prototype.useXHR=function(a,f){this._host=a;return this._port=f};a.prototype.isUseXHR=function(){return this._host&&this._port};a.prototype.onEvent=function(a){return this._eventListener=a};a.prototype.isArray=Array.isArray||function(a){return"[object Array]"==={}.toString.call(a)};q.UIEAudioStreamer=
a}).call(this);
